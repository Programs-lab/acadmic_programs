
<%= render  'shared/card' do %>
  <div  class="w-full px-4">
    <%= form_for('user_appointment', url: create_appointment_user_path, method: :post, html: {id: "user_no_registered",'v-cloak' => true, 'doctor_id' => @doctor_id, 'procedure_types' => @procedure_types.to_json(only: [:id, :procedure_type_name, :procedure_duration]), 'unavailable_working_hours' => @unavailable_working_hours },  class: "w-full max-w-md") do |f| %>
   <nav-vue :ids="navIds" :nav="navIds[indexNav]">
     <template #1>
       1. Cita
     </template>
     <template #2>
       2. Informaci贸n
     </template>
     <template #3>
       3. Confirmar
     </template>
     <template #content1 v-if="renderForm">
       <%= render 'calendar', f: f %>
     </template>
     <template #content2 v-if="renderForm">
       <div class="flex flex-wrap w-full">
       <div class="w-full px-4 shadow rounded-b py-4 border-t-4 border-primary">
         <%= render 'registration_data', f: f %>
       </div>
       </div>
     </template>
     <template #content3 v-if="renderForm">
      <div class="flex flex-wrap w-full">
        <div class="flex flex-wrap w-full md:w-1/2 border-b pb-2 mb-2 md:mb-0 md:pb-0 md:pb-0 md:border-none">
          <div class="flex w-full mb-4">
            <h4>Informaci贸n personal</h4>
          </div>
          <div class="flex w-full mb-2 text-sm">
            <span class="font-semibold">Nombre:</span> <p class="ml-2">{{firstNameValue + ' ' + lastNameValue}}</p>
          </div>
          <div class="flex w-full mb-2 text-sm">
            <span class="font-semibold">Telefono:</span> <p class="ml-2">{{phoneNumber}}</p>
          </div>
          <div class="flex w-full mb-2 text-sm">
            <span class="font-semibold">Cedula:</span> <p class="ml-2">{{idNumber + ' ' + idType}}</p>
          </div>
          <div class="flex w-full mb-2 text-sm">
            <span class="font-semibold">Correo:</span> <p class="ml-2">{{emailValue}}</p>
          </div>
        </div>
        <div class="flex flex-wrap w-full md:w-1/2">
          <div class="flex w-full mb-4">
            <h4>Informaci贸n de cita</h4>
          </div>
          <div class="flex w-full mb-2 text-sm">
            <span class="font-semibold">Tipo de cita:</span> <p class="ml-2">{{ procedureName }}</p>
          </div>
          <div class="flex w-full mb-2 text-sm">
            <span class="font-semibold">Medico: </span> <p class="ml-2">Dr. {{doctor.first_name + ' ' + doctor.last_name}}</p>
          </div>
          <div class="flex w-full mb-2 text-sm">
            <span class="font-semibold">Hora de cita:</span> <p class="ml-2">{{appointmentHour == '' ? '' :  $moment(appointmentHour).format("DD MMM YYYY hh:mm a")}}</p>
          </div>
        </div>
        <div class="divider"></div>
        <div class="flex justify-end w-full">
          <div class="flex justify-end w-2/4 mr-1">
           <%= link_to("Cancelar", request.referer, class: "btn btn-secondary no-underline", "v-ripple.350" => "'rgba(0, 0, 0, 0.35)'") %>
          </div>
          <div class="flex justify-end w-2/4 ml-1">
           <%= f.submit "Registrar", id: "submit_button", class: "btn btn-primary", ':disabled' => "validSubmit" %>
          </div>
        </div>
      </div>
     </template>
   </nav-vue>
   <div id="" v-if="!renderForm" class="alert alert-info" role="alert" v-cloak>
     <div class="flex">
       <%= icon('fa', 'info-circle', class: 'mr-3 fa-2x') %>
       <div class="text-teal-darkest w-1/2">
         <p class="font-bold">Atenci贸n.</p>
         <p class="text-sm">No se puede agendar citas en este momento.</p>
       </div>
     </div>
   </div>
   <% end %>
  </div>
<% end %>
