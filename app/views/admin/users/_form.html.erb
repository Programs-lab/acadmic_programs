  <!-- table heading -->
<div class="flex flex-wrap w-full">
<div class="w-full px-4 shadow rounded-b py-4 border-t-4 border-primary">
<%= form_for([:admin, user], html: {id: 'user_form', 'v-cloak' => true, 'firstName' => user.first_name, 'lastName' => user.last_name, 'birthdate' => user.birthdate, 'email' => user.email, 'pato' => user.email?}, class: "w-full max-w-md") do |f| %>

  <div class="flex flex-wrap -mx-3 mb-5">
    <div id= "firstNameField" class="w-full md:w-1/2 px-3 mb-5 md:mb-0 focus_form disabled_form">
      <%= f.label :nombre, class: 'label_input' %>
      <%= f.text_field :first_name, class: 'field_input rounded-t', "v-model" => "firstNameValue", "@input" => "fieldClass('firstNameField', $v.firstNameValue.$invalid), $v.firstNameValue.$touch()", disabled: @user.disabled%>
    </div>
    <div id= "lasttNameField" class="w-full md:w-1/2 px-3 focus_form">
      <%= f.label :apellido, class: 'label_input' %>
      <%= f.text_field :last_name, class: 'field_input rounded-t', "v-model" => "lastNameValue", "@input" => "fieldClass('lasttNameField', $v.lastNameValue.$invalid), $v.lastNameValue.$touch()", disabled: @user.disabled %>
    </div>
  </div>
  <div class="flex flex-wrap -mx-3 mb-5">
    <div class="w-full md:w-1/2 px-3 mb-5 md:mb-0 focus_form">
      <%= f.label :tipo_de_documento, class: 'label_input' %>
      <div class="relative">
        <%=
        f.collection_select(
          :id_type,
          ID_TYPES,
          :last,
          :first,
          {include_blank: true},
          {
            class: "block appearance-none w-full border-b text-grey-darker py-3 px-4 pr-8 focus:outline-none bg-white focus:border-grey h-8", disabled: @user.disabled
          }
        )
        %>
      </div>
    </div>
    <div class="w-full md:w-1/2 px-3 focus_form">
      <%= f.label "N° de documento", class: 'label_input' %>
      <%= f.number_field :id_number, class: 'field_input rounded-t', disabled: @user.disabled %>
    </div>
  </div>
  <div class="flex flex-wrap -mx-3 mb-5">
    <div class="w-full md:w-1/2 px-3 mb-5 md:mb-0 focus_form">
      <%= f.label "Telefono", class: 'label_input' %>
      <%= f.number_field :phone_number, class: 'field_input rounded-t', disabled: @user.disabled %>
    </div>
    <div class="w-full md:w-1/2 px-3 ">
      <label class="label_input" for="grid-state">
        Empresa de afiliación
      </label>
      <div class="relative">
        <select class="block appearance-none w-full border-b text-grey-darker py-3 focus:outline-none bg-white focus:border-grey h-8 " id="grid-state">
          <option class="bg-primary">Nueva EPS</option>
          <option>Missouri</option>
          <option>Texas</option>
        </select>
      </div>
    </div>
  </div>
  <div class="flex flex-wrap -mx-3 mb-5">
    <div class="w-full md:w-1/2 px-3 mb-5 md:mb-0 focus_form">
      <%= f.label "Ocupación", class: 'label_input' %>
      <%= f.text_field :occupation, class: 'field_input rounded-t', disabled: @user.disabled %>
    </div>
    <div class="w-full md:w-1/2 px-3 focus_form">
      <%= f.label "Fecha de nacimiento", class: 'label_input' %>
      <datepicker input-class="field_input rounded-t" :disabled= "<%= user.disabled %>" :language="es" v-model="birthdateValue"></datepicker>
      <%= f.hidden_field :birthdate, {"v-model" => "birthdateValue"} %>
    </div>
  </div>
  <div class="flex flex-wrap -mx-3 mb-5">
    <div class="w-full px-3 focus_form">
      <%= f.label "Dirreción", class: 'label_input' %>
      <%= f.text_field :address, class: 'field_input rounded-t', disabled: @user.disabled %>
    </div>
  </div>
  <div class="flex flex-wrap -mx-3 mb-5">
    <div id= "emailField" class="w-full px-3 focus_form">
      <%= f.label :email, class: 'label_input' %>
      <%= f.email_field :email, autocomplete: "email", class: 'field_input rounded-t', "v-model" => "emailValue", "@input" => "fieldClass('emailField', $v.emailValue.$invalid), $v.emailValue.$touch()", disabled: @user.disabled %>
    </div>
  </div>

   <div class="flex flex-wrap -mx-3 mb-5">
    <div class="w-full md:w-1/2 px-3 mb-5 md:mb-0 focus_form">
      <%= f.label :rol, class: 'label_input' %>
      <div class="relative">
        <%=
        f.collection_select(
          :role,
          ROLES,
          :first,
          :last,
          {include_blank: false},
          {
            class: "block appearance-none w-full border-b text-grey-darker py-3 px-4 pr-8 focus:outline-none bg-white focus:border-grey h-8", disabled: @user.disabled
          }
        )
        %>
      </div>
    </div>

  <% unless @user.new_record? %>

      <div class="w-full md:w-1/2 px-3 py-4 mb-5 md:mb-0 items-center">
        <%= link_to(admin_user_invite_path(@user.id), method: :post, class: "flex w-full btn btn-secondary", disabled: @user.disabled) do %>
          <%= icon('fas', 'paper-plane', 'enviar invitacion', class: "mr-2") %>
        <% end %>
        <% if user.invitation_sent_at.present? %>
          <small style="color: #909292;">Ultima invitaci&oacute;n <%= user.invitation_sent_at.strftime("enviada en la fecha: %m/%d/%Y a las %I:%M%p") %></small>
        <% end %>
      </div>
  <% end %>

  </div>


  <% if @user.new_record? %>
    <div class="alert alert-warning" role="alert">
      <div class="flex">
        <%= icon('fa', icon_alert['warning'], class: 'mr-3 fa-2x') %>
        <div class="text-teal-darkest w-full">
          <p class="font-bold">Atención.</p>
          <p class="text-sm">Se enviará un correo de invitacion al correo electronico correspondiente con instrucciones de asignado de contraseña el cual expirara en 24 horas</p>
        </div>
      </div>
    </div>
  <% end %>


  <div class="md:flex md:items-center justify-end mt-6">
    <% unless @user.new_record? %>
      <div class="justify-start w-1/2">
        <div class="justify-between w-auto">
          <% if user.disabled %>
            <a id="myBtn" class="btn btn-secondary" @click="btnModal()">Habilitar</a>
          <% else %>
            <a id="myBtn" class="btn btn-secondary" @click="btnModal()">Deshabilitar</a>
          <% end %>
        </div>
      </div>

      <div class="flex flex-wrap px-4">
        <!-- The Modal -->
        <transition name="transition-modal" >
          <div id="myModal" class="modal" v-show="modal" v-cloak>
            <!-- Modal content -->
            <div :class="classAnimatedContent" class="card modal-content" leave-active-class="animated bounceOutRight">
              <div class="row modal-title">
                <div class="flex w-1/2 justify-start">
                  <p>Titulo del modal</p>
                </div>
                <div class="flex w-1/2 justify-end">
                  <span class="times" @click="btnModal()">&times;</span>
                </div>
              </div>
              <div class="row my-6">
                <div class="flex w-full justify-start">
                  Esta seguro que desea <%= user.disabled ? "habilitar" : "deshabilitar" %> al usuario <%= "#{@user.first_name} #{@user.last_name}?" %> Esto afectara el acceso del usuario a la plataforma
                </div>
              </div>
              <div class="row modal-footer">

                <div class="flex justify-between">
                  <a  name="button" class="btn btn-red-light mx-1"  @click="btnModal()">Cancelar</a>
                  <% if user.disabled %>
                    <%= link_to "Habilitar", admin_user_enable_path(@user.id), method: :post, class: 'btn btn-primary' %>
                  <% else %>
                    <%= link_to "Deshabilitar", admin_user_disable_path(@user.id), method: :post, class: 'btn btn-primary' %>
                  <% end %>
                </div>
              </div>
            </div>
          </div>
        </transition>
      </div>




    <% end %>
    <div class="flex justify-end w-1/2">
      <div class="flex justify-between w-full">
        <div class="flex justify-end w-3/4">
         <%= link_to("Cancelar", admin_users_path, class: "btn btn-secondary no-underline") %>
        {{disabled}}
        </div>
        <div class="flex justify-end w-32">
         <%= f.submit "Registrar", id: "submit_button", class: "btn btn-primary", ':disabled' => "$v.$anyError || $v.$invalid" %>
        </div>
      </div>
    </div>
  </div>
<% end %>
</div>
</div>
